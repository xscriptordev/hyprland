# ╔═══════════════════════════════════════════════════════════════════════════╗
# ║ AUTOSTART APPLICATIONS                                                    ║
# ╚═══════════════════════════════════════════════════════════════════════════╝

# ┌───────────────────────────────────────────────────────────────────────────┐
# │ SYSTEM SERVICES                                                           │
# └───────────────────────────────────────────────────────────────────────────┘

# Keyring daemon for WiFi passwords (supports both GNOME and KDE users)
# KDE users: kwallet is used if available
# GNOME/other users: gnome-keyring is used
exec-once = /usr/lib/pam_kwallet_init || gnome-keyring-daemon --start --components=secrets,pkcs11
exec-once = gnome-keyring-daemon --start --components=secrets 2>/dev/null

# Authentication agent (with fallback paths for KDE and GNOME)
exec-once = /usr/lib/polkit-kde-authentication-agent-1 || /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 || /usr/libexec/polkit-kde-authentication-agent-1

# XDG Desktop Portal
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# ┌───────────────────────────────────────────────────────────────────────────┐
# │ UI COMPONENTS                                                             │
# └───────────────────────────────────────────────────────────────────────────┘

# Wallpaper daemon
exec-once = swww-daemon
exec-once = sleep 0.5 && swww img ~/.config/hypr/wallpapers/default.jpg --transition-type fade --transition-fps 60 --transition-duration 2

# Status bar
exec-once = waybar

# Notifications
exec-once = dunst

# ┌───────────────────────────────────────────────────────────────────────────┐
# │ UTILITIES                                                                 │
# └───────────────────────────────────────────────────────────────────────────┘

# Clipboard manager
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store

# Network manager applet
exec-once = nm-applet --indicator

# Bluetooth
exec-once = blueman-applet

# Idle management
exec-once = hypridle

# ┌───────────────────────────────────────────────────────────────────────────┐
# │ CURSOR                                                                    │
# └───────────────────────────────────────────────────────────────────────────┘

exec-once = hyprctl setcursor Bibata-Modern-Classic 24
exec-once = gsettings set org.gnome.desktop.interface cursor-theme 'Bibata-Modern-Classic'
exec-once = gsettings set org.gnome.desktop.interface cursor-size 24

# ┌───────────────────────────────────────────────────────────────────────────┐
# │ GTK THEME                                                                 │
# └───────────────────────────────────────────────────────────────────────────┘

exec-once = gsettings set org.gnome.desktop.interface gtk-theme 'adw-gtk3-dark'
exec-once = gsettings set org.gnome.desktop.interface color-scheme 'prefer-dark'
exec-once = gsettings set org.gnome.desktop.interface icon-theme 'Papirus-Dark'
